<div class="max-w-5xl mx-auto">
  <!-- HEADER -->
  <div class="bg-primary px-6 py-4 rounded-lg shadow mb-8">
    <h2 class="text-lg text-white font-semibold">Editar Usuario</h2>
  </div>

  <!-- Tabs -->
  <div class="grid md:grid-cols-2 gap-4 mt-6">
    <!-- Buscar por ID -->
    <div class="flex gap-2">
      <input
        type="number"
        name="searchId"
        placeholder="Ingrese ID"
        [(ngModel)]="searchId"
        class="input w-full"
      />
      <button
        type="button"
        class="btn-primary md:w-auto"
        (click)="searchById()"
      >
        Buscar
      </button>
    </div>

    <!-- Buscar por Email -->
    <div class="flex gap-2">
      <input
        type="email"
        name="searchEmail"
        placeholder="Ingrese Email"
        [(ngModel)]="searchEmail"
        class="input w-full"
      />
      <button
        type="button"
        class="btn-primary md:w-auto"
        (click)="searchByEmail()"
      >
        Buscar
      </button>
    </div>
  </div>

  <div *ngIf="loading" class="text-center py-4 text-primary font-medium">
    Cargando usuario...
  </div>

  <!-- FORM CARD -->
  <div class="bg-transparent rounded-xl shadow-lg p-8">
    <form [formGroup]="userForm" class="space-y-6">
      <!-- ROL -->
      <div>
        <label class="block text-sm mb-1">Rol *</label>
        <select formControlName="role" class="input w-full">
          <option value="">Seleccionar rol</option>
          <option value="1">SUPERADMIN</option>
          <option value="2">ADMIN</option>
          <option value="3">SUPERVISOR</option>
          <option value="4">TECNICO</option>
        </select>
      </div>

      <!-- NOMBRE / APELLIDO -->
      <div class="grid md:grid-cols-2 gap-6">
        <div>
          <label class="block text-sm mb-1">Nombres *</label>
          <input formControlName="firstName" class="input w-full" />

          <div
            *ngIf="
              userForm.get('firstName')?.invalid &&
              userForm.get('firstName')?.touched
            "
            class="text-sm text-red-500 mt-1"
          >
            Nombre inválido
          </div>
        </div>

        <div>
          <label class="block text-sm mb-1">Apellidos *</label>
          <input formControlName="lastName" class="input w-full" />
        </div>
      </div>

      <!-- FECHA / CELULAR -->
      <div class="grid md:grid-cols-2 gap-6">
        <div>
          <label class="block text-sm mb-1">Fecha de Nacimiento</label>
          <input type="date" formControlName="birthDate" class="input w-full" />
        </div>

        <div>
          <label class="block text-sm mb-1">Celular</label>
          <input formControlName="phone" class="input w-full" />
        </div>
      </div>

      <!-- DOCUMENTO / EMAIL -->
      <div class="grid md:grid-cols-2 gap-6">
        <div>
          <label class="block text-sm mb-1">Cédula / NIT *</label>
          <input formControlName="document" class="input w-full" />
        </div>

        <div>
          <label class="block text-sm mb-1">Email *</label>
          <input type="email" formControlName="email" class="input w-full" />
        </div>
      </div>

      <!-- ENTIDAD -->
      <div>
        <label class="block text-sm mb-1">Entidad</label>
        <select formControlName="entity" class="input w-full">
          <option value="">Seleccionar entidad</option>
          <option value="1">SIGEBI</option>
          <option value="2">DRAGONESDEV</option>
          <option value="3">SANITAS</option>
          <option value="4">CLINICAX</option>
        </select>
      </div>

      <!-- BOTONES INTERMEDIOS -->
      <div class="flex flex-col md:flex-row gap-4 pt-4">
        <button type="button" class="btn-primary md:w-auto">
          Ver Contraseña
        </button>

        <button type="button" class="btn-primary md:w-auto">
          Servicios Asignados
        </button>

        <button type="button" class="btn-primary md:w-auto">
          Grupo de Trabajo
        </button>
      </div>

      <!-- BOTONES FINALES -->
      <div class="flex flex-col md:flex-row justify-between gap-4 pt-8">
        <button
          type="button"
          class="md:w-auto"
          [ngClass]="{
            'btn-primary': isUserActive,
            'bg-primary text-white px-4 py-2 rounded-md shadow-sm hover:opacity-90':
              !isUserActive,
          }"
          [disabled]="loading"
          (click)="toggleUserStatus()"
        >
          {{ isUserActive ? "Bloquear" : "Activar" }}
        </button>

        <button
          type="button"
          class="btn-primary md:w-auto"
          [disabled]="userForm.invalid || loading"
        >
          Eliminar
        </button>
      </div>

      <div class="pt-4 text-center">
        <button type="submit" class="btn-primary md:w-auto">Guardar</button>
      </div>
    </form>
  </div>
</div>
